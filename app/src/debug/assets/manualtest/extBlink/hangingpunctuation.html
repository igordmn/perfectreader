<html  lang="ru">
<head>
    <meta charset="utf-8">
</head>
<body style="margin:15px; width:300px">

<div><button onclick="toggleHang();">toggleHang</button><button onclick="configureHang();">configureHang</button></div>

<div style="border-left: thin solid #ff0000; border-right: thin solid #ff0000;">

    <div id="ddd" style="text-align: justify; font-size: 100%; transform: scale(2,1); width: 50%; margin-left: 25%">
        (HANGING TEXT) text, text, text, text, text, text
    </div>

    <div style="-typo-hanging-punctuation: on; text-align: left;  width: 130">
        (LEFT HANG LEFT HANG
    </div>

    <div style="-typo-hanging-punctuation: on; text-align: right;  width: 130">
        RIGHT HANG) RIGHT HANG
    </div>

    <div style="-typo-hanging-punctuation: on; text-align: center; width: 130">
        (CENTER HANG) CENTER HANG)
    </div>

    <pre style="-typo-hanging-punctuation: on; margin:0">(PRE TEXT NOT HANGING</pre>

    <div style="-typo-hanging-punctuation: on; text-align:justify;">
        <span style="white-space: pre">(WHITE-SPACE: PRE</span> NOT HANGING, BUT ONLY IN SPAN
    </div>

    <svg height="20">
        <text y=15 style="-typo-hanging-punctuation: on; text-align: justify;">(SVG TEXT NOT HANGING</text>
    </svg>

    <div style="-typo-hanging-punctuation: on; text-align:justify;">
        <span></span>         (should ignore spans ignore spans<span>)  <span><span>  </span></span>  <span></span>   </span>
        should ignore spans
    </div>
    <div style="-typo-hanging-punctuation: on; text-align:justify;">
        <span></span>         <button style="background: red; border: none"></button>(button on the edge, on the edge<span>)  <span><span>  </span></span>  <span></span><button style="background: red; border: none"></button>   </span>
        button on the edge
    </div>


    <table style="border: 0; height: 100; border-top: thin solid #ff0000; border-bottom: thin solid #ff0000;">
        <tr>
            <td style="width: 100; padding: 0">
                <div style="-typo-hanging-punctuation: on; text-align: justify; transform: rotate(90deg); ">
                    (rotated text should hang, rotated text should hang
                </div>
            </td>
            <td style="width: 100; padding: 0">
                <div style="-typo-hanging-punctuation: on; text-align: justify; -webkit-writing-mode: vertical-rl; height: 100">
                    (vertical rl should hang, vertical-rl "hang"
                </div>
            </td>
            <td style="width: 100; padding: 0">
                <div style="-typo-hanging-punctuation: on; text-align: justify; -webkit-writing-mode: vertical-lr;  height: 100">
                    (vertical lr should hang, vertical-lr "hang"
                </div>
            </td>
        </tr>
    </table>

    <div style="-typo-hanging-punctuation: on; text-align: justify;">
        (اللغة العربيةال لغةالعربيةاللغة العربيغة العلالعلرغعة العة العرغ,ة العرعرا؟ abcdefg, بيةال,لغة العاللغعا
    </div>

</div>

<script type="text/javascript">
    var config1 = {
        hangingPunctuation: {
            startChars: [
                { charCode: "(".charCodeAt(0), hangFactor: 1.0 },
                { charCode: "\"".charCodeAt(0), hangFactor: 1.0 },
            ],
            endChars: [
                { charCode: ")".charCodeAt(0), hangFactor: 1.0},
                { charCode: "\"".charCodeAt(0), hangFactor: 1.0 },
                { charCode: ",".charCodeAt(0), hangFactor: 1.0 },
                { charCode: ".".charCodeAt(0), hangFactor: 1.0 },
            ]
        }
    };

    var config2 = {
        hangingPunctuation: {
            startChars: [
                { charCode: "(".charCodeAt(0), hangFactor: 0.5 },
                { charCode: "\"".charCodeAt(0), hangFactor: 0.5 },
            ],
            endChars: [
                { charCode: ")".charCodeAt(0), hangFactor: 1.0 },
                { charCode: "\"".charCodeAt(0), hangFactor: 1.0 },
                { charCode: ",".charCodeAt(0), hangFactor: 0.5 },
                { charCode: ".".charCodeAt(0), hangFactor: 1.0 },
            ]
        }
    };

    var currentConfig = config1;
    document.typoConfigure(currentConfig);

    function toggleHang() {
        var ddd = document.getElementById("ddd");;
        if (ddd.style.getPropertyValue("-typo-hanging-punctuation") != "on") {
            ddd.style.setProperty("-typo-hanging-punctuation", "on", "important");
        } else {
            ddd.style.setProperty("-typo-hanging-punctuation", "off", "important");
        }
    }

    function configureHang() {
        currentConfig = currentConfig == config1 ? config2 : config1
        document.typoConfigure(currentConfig);
    }
</script>

</body>
</html>